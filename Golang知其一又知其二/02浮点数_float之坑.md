## 一、float 的基本介绍

float 也就是我们数学中的小数，比如 0.1， 3.14， -5.55 等。

在 Go 中，有两种浮点数类型，分别是 float64 和 float32。他们的区别如下

| 类型    | 精度   | 占用的存储空间 | 范围               |
| ------- | ------ | -------------- | ------------------ |
| float32 | 单精度 | 4字节          | 1.4e-45 ~ 3.4e38   |
| float64 | 双精度 | 8字节          | 4.9e-324 ~ 1.8e308 |

一个 float32 类型的浮点数可以提供大约 6 个十进制数的精度，而 float64 则可以提供约 15 个十进制数的精度，**通常应该优先使用 float64 类型**。

使用方式，直接赋值即可：

```go
var (
	pi = 3.141592653
    num = .777
)
```

对于大数或者很小的数，float 还能使用科学计数法表示

```go
const Avogadro = 6.02214129e23  // 阿伏伽德罗常数
const Planck   = 6.62606957e-34 // 普朗克常数
```

我们在编码过程中，float 的使用就是那么简单，我们几乎不会多去思考这个赋值的过程，毕竟

![](https://pic.imgdb.cn/item/638c61ed16f2c2beb191922e.jpg)

但是 float 依然是有风险的，在一些存在小数的场景，我们甚至不能盲目的就使用 float 类型！

### float32 / float64 的来源

golang 与其他很多语言（C、C++、Python…）一样，使用了IEEE-754标准存储浮点数。该规范使用特殊的以2为基数的科学表示法表示浮点数。比如下表的No.3：

| 编号 | 10进制数 | 科学计数法 | 指数           | 系数    | 底数 | 指数 | 小数   |
| ---- | -------- | ---------- | -------------- | ------- | ---- | ---- | ------ |
| 1    | 500      | 5e+2       | 5 * 10^2       | 5       | 10   | 2    | 0      |
| 2    | 5555.33  | 5.55533e+3 | 5.55533 * 10^3 | 5.55533 | 10   | 3    | .55533 |
| 3    | 0.085    | 8.5e-2     | 1.36 * 2^-4    | 1.36    | 2    | -4   | .36    |

> **关于 IEEE-754**
>
> 由于不同机器对浮点数的表示有较大差别，这不利于软件在不同计算机之间的移植。为此，美国IEEE提出了一个从系统角度支持浮点数的表示方法，称为IEEE754标准（IEEE，1985），当今流行的计算机几乎都采用了这一标准。

## 二、为什么要优先使用 float64 ？

### float32 与 float64 的结构

我们前文说到

> 一个 float32 类型的浮点数可以提供大约 6 个十进制数的精度，而 float64 则可以提供约 15 个十进制数的精度

除此之外，还有一个知识点：float32的有效bit位只有23个, 其它的bit位用于指数和符号；当整数大于23bit能表达的范围时，float32的表示将出现误差

干巴巴的文字总是难以理解，但我们看看两种 float 的结构，相信能对学习这两个知识点有所帮助。

<img src="https://pic.imgdb.cn/item/638e1203b1fccdcd36f705c3.png" style="zoom: 80%;" />





- float32 的精度更低，更容易出现误差

- float 能表示的正整数并不是很大

  ```go
  var f float32 = 16777216 // 1 << 24
  fmt.Println(f == f+1)    // "true"!
  ```

在一些



## 参考文献

[1] [Go语言圣经（中文版）](http://books.studygolang.com/gopl-zh/)